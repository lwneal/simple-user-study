<!DOCTYPE html>
<html>

    <head lang="en">

        <meta charset="UTF-8">
        <meta name="viewport" content="width = device-width, user-scalable = yes">

        <title>Space Invaders</title>
        <meta name="description" content="Javatari - The online Atari 2600 emulator">
        <link rel="icon" type="image/png" sizes="192x192" href="../src/runtime/images/files/logo-icon192.png">

        <meta name="mobile-web-app-capable" content="yes">
        <link rel="manifest" href="manifest.webapp">

        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon" sizes="512x512" href="../src/runtime/images/files/logo-icon512.png">
        
        <style>
            html, body {
                margin: 0;
                padding: 0;
                background: #f4f4f4;
            }
            @media only screen and (orientation: landscape) and (max-device-width: 767px) {
                #javatari {
                    max-width: 75%;
                }
            }
        </style>

        <script src="../src/main/room/screen/FullScreenSetup.js"></script>

    </head>

    <body>

        <script>
            JAVATARI_IMAGES_PATH = "../src/runtime/images/files/";
        </script>

        <script src="../src/main/Javatari.js"></script>
        <script src="../src/main/room/screen/FullScreenSetup.js"></script>
        <script src="../src/main/util/Util.js"></script>
        <script src="../src/main/util/MD5.js"></script>
        <script src="../src/main/util/ZIP.js"></script>
        <script src="../src/main/util/EmbeddedFiles.js"></script>
        <script src="../src/main/util/MultiDownloader.js"></script>
        <script src="../src/main/util/MultiFileReader.js"></script>
        <script src="../src/main/atari/video/VideoStandard.js"></script>
        <script src="../src/main/atari/video/VideoSignal.js"></script>
        <script src="../src/main/atari/audio/AudioSignal.js"></script>
        <script src="../src/main/atari/cpu/M6502.js"></script>
        <script src="../src/main/atari/pia/Ram.js"></script>
        <script src="../src/main/atari/pia/Pia.js"></script>
        <script src="../src/main/atari/tia/TiaPalettes.js"></script>
        <script src="../src/main/atari/tia/TiaAudio.js"></script>
        <script src="../src/main/atari/tia/TiaAudioChannel.js"></script>
        <script src="../src/main/atari/tia/Tia.js"></script>
        <script src="../src/main/atari/console/Bus.js"></script>
        <script src="../src/main/atari/console/AtariConsole.js"></script>
        <script src="../src/main/atari/controls/JoystickButtons.js"></script>
        <script src="../src/main/atari/controls/ConsoleControls.js"></script>
        <script src="../src/main/atari/cartridge/ROM.js"></script>
        <script src="../src/main/atari/cartridge/CartridgeDatabase.js"></script>
        <script src="../src/main/atari/cartridge/Cartridge.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge4K.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge2K_CV.js"></script>
        <script src="../src/main/atari/cartridge/formats/CartridgeBankedByMaskedRange.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge8K_E0.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge64K_F0.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge8K_FE.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge16K_E7.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge10K_DPCa.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge24K_28K_32K_FA2.js"></script>
        <script src="../src/main/atari/cartridge/formats/CartridgeBankedByBusMonitoring.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge8K_512K_3F.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge8K_512K_3E.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge8K_256K_SB.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge8K_64K_AR.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge64K_X07.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge8K_0840.js"></script>
        <script src="../src/main/atari/cartridge/formats/Cartridge8K_UA.js"></script>
        <script src="../src/main/atari/cartridge/CartridgeFormats.js"></script>
        <script src="../src/main/atari/cartridge/CartridgeCreator.js"></script>
        <script src="../src/main/images/Images.js"></script>
        <script src="../src/main/room/clock/Clock.js"></script>
        <script src="../src/main/room/files/RecentStoredROMs.js"></script>
        <script src="../src/main/room/files/FileLoader.js"></script>
        <script src="../src/main/room/files/FileDownloader.js"></script>
        <script src="../src/main/room/controls/DOMKeys.js"></script>
        <script src="../src/main/room/controls/GamepadButtons.js"></script>
        <script src="../src/main/room/controls/TouchControls.js"></script>
        <script src="../src/main/room/controls/GamepadConsoleControls.js"></script>
        <script src="../src/main/room/controls/DOMTouchControls.js"></script>
        <script src="../src/main/room/controls/DOMConsoleControls.js"></script>
        <script src="../src/main/room/screen/es6/ScreenGUI.js"></script>
        <script src="../src/main/room/screen/Monitor.js"></script>
        <script src="../src/main/room/screen/ConsolePanel.js"></script>
        <script src="../src/main/room/screen/CanvasDisplay.js"></script>
        <script src="../src/main/room/screen/dialogs/RecentROMsDialog.js"></script>
        <script src="../src/main/room/screen/dialogs/SaveStateDialog.js"></script>
        <script src="../src/main/room/screen/dialogs/QuickOptionsDialog.js"></script>
        <script src="../src/main/room/screen/dialogs/NetPlayDialog.js"></script>
        <script src="../src/main/room/screen/dialogs/CartridgeFormatDialog.js"></script>
        <script src="../src/main/room/screen/es6/SettingsGUI.js"></script>
        <script src="../src/main/room/screen/settings/Settings.js"></script>
        <script src="../src/main/room/speaker/WebAudioSpeaker.js"></script>
        <script src="../src/main/room/savestate/LocalStorageSaveStateMedia.js"></script>
        <script src="../src/main/room/controls/PeripheralControls.js"></script>
        <script src="../src/main/room/controls/DOMPeripheralControls.js"></script>
        <script src="../src/main/room/netplay/NetServer.js"></script>
        <script src="../src/main/room/netplay/NetClient.js"></script>
        <script src="../src/main/room/Room.js"></script>
        <script src="../src/main/userprefs/UserPreferences.js"></script>
        <script src="../src/main/userprefs/UserROMFormats.js"></script>
        <script src="../src/runtime/images/EmbeddedImages.js"></script>
        <script src="../src/main/Configurator.js"></script>
        <script src="../src/main/Launcher.js"></script>

        <center>
            <h4>Please take five minutes to play Space Invaders.</h4>

            Click the GAME RESET switch to begin.

            <div id="javatari" style="text-align: center; margin: 2px auto 0; padding: 0 10px;">
                <div id="javatari-screen" style="box-shadow: 2px 2px 10px rgba(0, 0, 0, .7);"></div>
            </div>

            <h4>You have been playing Space Invaders for:
            <label id="minutes">00</label>:<label id="seconds">00</label>
            </h4>

            When you are finished playing Space Invaders, click the button below to continue.
            <form action="/static/page1.html">
                <input id="user_id" type="text" name="user_id" hidden=true>
                <input type="submit" value="Continue">
            </form>

        </center>

        <script>
            Javatari.AUTO_POWER_ON_DELAY = 0;
            //Javatari.WEB_EXTENSIONS_SERVER = "webmsx.herokuapp.com";
            // XAI User study: use Space Invaders
            // Javatari.CARTRIDGE_URL = "roms/Pitfall.bin";
            Javatari.CARTRIDGE_URL = "roms/SpaceInvaders.zip";
        </script>

<script>
var minutesLabel = document.getElementById("minutes");
var secondsLabel = document.getElementById("seconds");
var totalSeconds = 0;
setInterval(setTime, 1000);

function setTime() {
  ++totalSeconds;
  secondsLabel.innerHTML = pad(totalSeconds % 60);
  minutesLabel.innerHTML = pad(parseInt(totalSeconds / 60));
}

function pad(val) {
  var valString = val + "";
  if (valString.length < 2) {
    return "0" + valString;
  } else {
    return valString;
  }
}
</script>

<script>
var urlParams = new URLSearchParams(window.location.search);
var userId = urlParams.get('user_id');
document.getElementById("user_id").value = urlParams.get('user_id');
</script>

    </body>

</html>
